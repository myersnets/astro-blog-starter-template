<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Favicons -->
  <link rel="icon" href="/assets/favicons/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Mountain Muscle | Oakhurst CA Gym</title>
  <meta name="description" content="Mountain Muscle is an old-school gym in Oakhurst, CA. Disciplined minds, disciplined bodies." />

  <!-- Social Preview / SEO -->
  <link rel="canonical" href="https://mountainmuscle.fitness/">
  <meta name="theme-color" content="#323232">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mountain Muscle | Oakhurst CA Gym">
  <meta property="og:description" content="Mountain Muscle is an old-school gym in Oakhurst, CA. Disciplined minds, disciplined bodies.">
  <meta property="og:url" content="https://mountainmuscle.fitness/">
  <meta property="og:image" content="https://mountainmuscle.fitness/assets/og/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Mountain Muscle | Oakhurst CA Gym">
  <meta name="twitter:description" content="Mountain Muscle is an old-school gym in Oakhurst, CA. Disciplined minds, disciplined bodies.">
  <meta name="twitter:image" content="https://mountainmuscle.fitness/assets/og/og-image.jpg">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Global Styles -->
  <link rel="stylesheet" href="/styles/global.css">
</head>

<body>
  <div id="top"></div>

  <!-- Splash overlay (plays once, then flies into the top-left logo + dissolves) -->
  <div id="logo-splash" class="logo-splash" aria-hidden="true">
    <video
      id="logo-splash-video"
      class="logo-splash__video"
      autoplay
      muted
      playsinline
      preload="auto"
    ></video>
  </div>

  <!-- DROPDOWN MENU -->
  <div class="menu-wrap">
    <button
      class="menu-button"
      id="menuButton"
      aria-label="Open menu"
      aria-expanded="false"
      type="button"
    >
      ☰
    </button>

    <div class="menu-dropdown" id="menuDropdown">
      <a href="#contact">Contact</a>
      <a href="#team">Meet the Team</a>
      <a href="#classes">Class Schedule</a>
      <a href="#visit">Come on in</a>
    </div>
  </div>

  <!-- HEADER / HERO -->
  <header class="hero">
    <nav class="nav">
      <img
        src="/assets/mountain-muscle-logo.png"
        alt="Mountain Muscle gym logo"
        class="logo"
        width="220"
        height="80"
        decoding="async"
        fetchpriority="high"
      />
    </nav>

    <div class="overlay"></div>

    <div class="hero-content">
      <h1>Mountain Muscle</h1>
      <p class="tagline">Disciplined minds, disciplined bodies.</p>
      <a href="#visit" class="cta">Come on in</a>
    </div>
  </header>

  <!-- ABOUT -->
  <section class="section dark">
    <div class="container">
      <h2>Old School. No Excuses.</h2>
      <p>
       Nestled in the heart of Oakhurst, just outside of Yosemite National Park, our gym has been the 
        cornerstone of this mountain community for over 40 years. AS A LOCALLY OWNED, FAITH DRIVEN BUSINESS, 
        WE BELIEVE IN INTEGRITY, SERVICE AND TREATING EVERY PERSON WHO WALKS THROUGH OUR DOORS WITH DIGNITY 
        AND RESPECT. YOU’LL OFTEN FIND OUR OWNER RIGHT BEHIND THE DESK OFFERING A SMILE AND ENCOURAGEMENT. 
        We’re built on old-school iron and real relationships. From our long time members who’ve been with 
        us for decades to those just starting their workout journey, we believe strength, 
        mobility and a healthy lifestyle is for EVERY generation. Check out our group classes and the 
        training floor that welcomes both seasoned lifters and new faces. 
        We’re proud to keep evolving while staying true to who we are. 
        Once you walk through our doors, you’re not just joining a gym – you’re joining a family.
      </p>
      <p>
        We value our first responders and active and veteran military service members
        with discounted memberships. Student discounts also available.
      </p>
    </div>
  </section>

  <!-- ABOUT SLIDESHOW -->
  <section class="section about-slideshow" aria-label="Gym photos slideshow">
    <div class="container">
      <h2>Inside Mountain Muscle</h2>
      <p class="section-intro">A quick look at our facility & our community.</p>

      <div class="slider" role="region" aria-label="Photo slider">
        <div class="slider__track" id="sliderTrack"></div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section class="section dark">
    <div class="container">
      <div class="features">
        <div class="feature">
          <h3>Serious Training</h3>
          <p>
            Free weights, machines, and space to train the right way. The Central Sierra's only regulation
            racquetball court. Semi-private functional fitness space and a heavy bag for focused training.
          </p>
        </div>

        <div class="feature">
          <h3>Tanning rooms</h3>
          <p>Tanning packages available. Give us a call or come in and check our specials.</p>
        </div>

        <div class="feature">
          <h3>Community Driven</h3>
          <p>A gym where effort is respected and discipline is earned.</p>
        </div>

        <div class="feature">
          <h3>Growing Toward 24/7 Access</h3>
          <p>Building toward secure, round-the-clock availability.</p>
        </div>
      </div>

      <div style="margin-top: 28px;">
        <button
          class="cta"
          type="button"
          data-modal="reviews-modal"
          aria-haspopup="dialog"
          aria-controls="reviews-modal"
        >
          See what the community thinks
        </button>
      </div>
    </div>
  </section>

  <!-- LOCATION -->
  <section class="section" id="visit">
    <div class="container">
      <h2>Are you ready? Let's go!</h2>
      <p>
        40118 Enterprise Dr.<br>
        Oakhurst, CA 93644
      </p>

      <div class="map">
        <iframe
          src="https://www.google.com/maps?q=Mountain+Muscle+Oakhurst+CA&output=embed"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </section>

  <!-- TEAM -->
  <section id="team" class="section dark">
    <div class="container">
      <h2>Meet the Team</h2>

      <div class="team-grid">
        <button class="team-member team-member--clickable" type="button" data-modal="instructor-kathy" aria-haspopup="dialog" aria-controls="instructor-kathy">
          <img src="/assets/instructor1.jpg" alt="Kathy Jackson" loading="lazy">
          <h3>Kathy Jackson</h3>
          <p>Silver Sneakers instructor specializing in functional training and mobility.</p>
        </button>

        <button class="team-member team-member--clickable" type="button" data-modal="instructor-karina" aria-haspopup="dialog" aria-controls="instructor-karina">
          <img src="/assets/instructor5.jpg" alt="Karina Brown" loading="lazy">
          <h3>Karina Brown</h3>
          <p>General wellness and strength training.</p>
        </button>

        <button class="team-member team-member--clickable" type="button" data-modal="instructor-gerri" aria-haspopup="dialog" aria-controls="instructor-gerri">
          <img src="/assets/instructor2.jpg" alt="Gerri Russell" loading="lazy">
          <h3>Gerri Russell</h3>
          <p>REFIT group fitness instructor with a focus on energy and strength.</p>
        </button>

        <button class="team-member team-member--clickable" type="button" data-modal="instructor-lisa" aria-haspopup="dialog" aria-controls="instructor-lisa">
          <img src="/assets/instructor3.jpg" alt="Lisa Wobler" loading="lazy">
          <h3>Lisa Wobler</h3>
          <p>General flow yoga instructor.</p>
        </button>

        <button class="team-member team-member--clickable" type="button" data-modal="instructor-meloni" aria-haspopup="dialog" aria-controls="instructor-meloni">
          <img src="/assets/instructor4.jpg" alt="Meloni Mullins" loading="lazy">
          <h3>Meloni Mullins</h3>
          <p>Silver Sneakers certified instructor — strength circuit, mobility, and balance.</p>
        </button>
      </div>
    </div>
  </section>

  <!-- INSTRUCTOR MODALS -->
 <div class="modal" id="instructor-meloni" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="meloni-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__content">
        <div class="modal__media">
          <img src="/assets/instructor4.jpg" alt="Meloni Mullins" loading="lazy">
        </div>
        <div class="modal__text">
          <h3 id="meloni-title">Meloni Mullins</h3>
          <p class="muted">Silver Sneakers certified instructor — 
            Silver Sneakers is a strength conditioning class with interval-
            style training designed to strengthen your upper & lower body with resistance bands & light weights. 
            Strong focus on balance & stability with low-impact cardio movements are alternated to maximize fitness benefits.</p>
          <ul class="bio-bullets">
            <li><strong>Focus:</strong> circuits, mobility, conditioning</li>
            <li><strong>Good for:</strong> mobility + balance + movement quality</li>
            <li><strong>Style:</strong> Uptempo, structured, form-forward</li>
          </ul>
          <div class="tags">
            <span>Circuits</span><span>Mobility</span><span>Silver Sneakers</span>
          </div>
        </div>
      </div>
    </div>
  </div>  

  <div class="modal" id="instructor-kathy" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="kathy-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__content">
        <div class="modal__media">
          <img src="/assets/instructor1.jpg" alt="Kathy Jackson" loading="lazy">
        </div>
        <div class="modal__text">
          <h3 id="kathy-title">Kathy Jackson</h3>
          <p class="muted">Kathy's class is a strength conditioning class with interval-
            style training designed to strengthen your upper & lower body with resistance bands & light weights. 
            Strong focus on balance & stability with low-impact cardio movements are alternated to maximize fitness benefits.</p>
          <ul class="bio-bullets">
            <li><strong>Focus:</strong> mobility, balance, functional strength</li>
            <li><strong>Good for:</strong> beginners, active adults, injury-aware training</li>
            <li><strong>Style:</strong> encouraging, steady pace, accomodating</li>
          </ul>
          <div class="tags">
            <span>Mobility</span><span>Functional</span><span>Silver Sneakers</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="instructor-karina" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="karina-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__content">
        <div class="modal__media">
          <img src="/assets/instructor5.jpg" alt="Karina Brown" loading="lazy">
        </div>
        <div class="modal__text">
          <h3 id="karina-title">Karina Brown</h3>
          <p class="muted"> Light weight, high repetition, compound movements for upper and lower body and, 
            of course, core! Wrapping up with spectacular stretching &/or breathwork</p>
          <ul class="bio-bullets">
            <li><strong>Focus:</strong> strength basics + sustainable fitness + whole body wellness</li>
            <li><strong>Good for:</strong> building confidence and consistency</li>
            <li><strong>Style:</strong> practical coaching, coordination, clear cues</li>
          </ul>
          <div class="tags">
            <span>Strength</span><span>Wellness</span><span>Beginner-friendly</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="instructor-gerri" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="gerri-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__content">
        <div class="modal__media">
          <img src="/assets/instructor2.jpg" alt="Gerri Russell" loading="lazy">
        </div>
        <div class="modal__text">
          <h3 id="gerri-title">Gerri Russell</h3>
          <p class="muted"> No matter your age, shape or experience, REFIT is the perfect fit for anyBODY. High energy, movement, 
            strength and friendship make this class 100% fun and energizing.</p>
          <ul class="bio-bullets">
            <li><strong>Focus:</strong> conditioning, stamina, sweat sessions</li>
            <li><strong>Good for:</strong> energy, accountability, group motivation</li>
            <li><strong>Style:</strong> upbeat, music-driven, empowering</li>
          </ul>
          <div class="tags">
            <span>REFIT</span><span>Conditioning</span><span>Endurance</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="instructor-lisa" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="lisa-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__content">
        <div class="modal__media">
          <img src="/assets/instructor3.jpg" alt="Lisa Wobler" loading="lazy">
        </div>
        <div class="modal__text">
          <h3 id="lisa-title">Lisa Wobler</h3>
          <p class="muted"> In Chair Yoga we move through seated and standing yoga poses to increase flexibility, 
            balance and range of motion. A chair is used for seated and standing options to meet a 
            variety of fitness and skill levels.</p>
          <ul class="bio-bullets">
            <li><strong>Focus:</strong> breath, mobility, strength through flow</li>
            <li><strong>Good for:</strong> flexibility, recovery, stress reset</li>
            <li><strong>Style:</strong> grounded, clear pacing, supportive</li>
          </ul>
          <div class="tags">
            <span>Yoga</span><span>Flow</span><span>Recovery</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- REVIEWS MODAL -->
  <div class="modal" id="reviews-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="reviews-title">
    <div class="modal__backdrop" data-close></div>
    <div class="modal__panel" role="document">
      <button class="modal__close" type="button" aria-label="Close" data-close>×</button>

      <div class="modal__text" style="padding: 28px;">
        <h3 id="reviews-title">What the community thinks</h3>
        <p class="muted">Real feedback from Mountain Muscle members.</p>

        <div class="reviews-list">
          <article class="review">
            <div class="review__top">
              <strong>J.</strong>
              <span class="review__stars" aria-label="5 out of 5 stars">★★★★★</span>
            </div>
            <p>“Old school gym, great people, no nonsense. Exactly what Oakhurst needed.”</p>
          </article>

          <article class="review">
            <div class="review__top">
              <strong>S.</strong>
              <span class="review__stars" aria-label="5 out of 5 stars">★★★★★</span>
            </div>
            <p>“Friendly staff, solid equipment, and a great atmosphere.”</p>
          </article>
        </div>

        <div style="margin-top: 16px; display:flex; gap:10px; flex-wrap:wrap;">
          <a class="cta" href="https://www.google.com/search?q=Mountain+Muscle+Oakhurst+CA+reviews" target="_blank" rel="noopener">
            Read all reviews on Google
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- CLASSES -->
  <section id="classes" class="section">
    <div class="container">
      <h2>Class Schedule</h2>
      <p class="section-intro">Group classes are included with membership. Schedule subject to change.</p>
      <div class="schedule-wrap">
  <div class="schedule-header">
    <div class="schedule-h-time">Time</div>
    <div class="schedule-h-day">Monday</div>
    <div class="schedule-h-day">Tuesday</div>
    <div class="schedule-h-day">Wednesday</div>
    <div class="schedule-h-day">Thursday</div>
    <div class="schedule-h-day">Friday</div>
  </div>

  <div id="scheduleGrid" class="schedule-grid" aria-label="Weekly class schedule"></div>
</div>

<!-- Modal -->
<div id="classModalOverlay" class="class-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="classModalTitle">
  <div class="class-modal" role="document">
    <div class="class-modal-top">
      <div>
        <div id="classModalTitle" class="class-modal-title"></div>
        <div id="classModalMeta" class="class-modal-meta"></div>
      </div>
      <button type="button" id="classModalClose" class="class-modal-close" aria-label="Close">Close</button>
    </div>

    <div class="class-modal-body">
      <div id="classModalTags" class="class-modal-tags"></div>
      <p id="classModalDesc" class="class-modal-p"></p>
      <p id="classModalBring" class="class-modal-p"></p>
      <p id="classModalNotes" class="class-modal-p"></p>
    </div>
    </div>
   </div>
  </section>

  <!-- CONTACT -->
  <section class="section dark" id="contact">
<section class="section dark" id="contact">
  <div class="container">
    <h2>Contact Us</h2>

    <div class="contact-grid">
      <div class="feature">
        <h3>Phone</h3>
        <p><a class="contact-link" href="tel:15596417255">(559) 641–7255</a></p>
      </div>

      <div class="feature">
        <h3>Hours</h3>
        <p>Monday – Friday: 6am – 9pm</p>
        <p>Saturday: 9am – 4pm</p>
        <p>Sunday: CLOSED</p>
      </div>
    </div>

    <div class="socials socials--icons">
      <a class="social-link" href="https://www.facebook.com/MountainMuscleOakhurst" target="_blank" rel="noopener" aria-label="Facebook">
        <!-- Facebook icon -->
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M22 12a10 10 0 1 0-11.56 9.87v-6.99H7.9V12h2.54V9.8c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56V12h2.78l-.44 2.88h-2.34v6.99A10 10 0 0 0 22 12z"/>
        </svg>
        <span>Facebook</span>
      </a>

      <a class="social-link" href="https://www.instagram.com/mountainmuscleoakhurst" target="_blank" rel="noopener" aria-label="Instagram">
        <!-- Instagram icon -->
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 4.2A3.8 3.8 0 1 1 8.2 12 3.8 3.8 0 0 1 12 8.2zm0 2A1.8 1.8 0 1 0 13.8 12 1.8 1.8 0 0 0 12 10.2zM17.6 6.4a.8.8 0 1 1-.8.8.8.8 0 0 1 .8-.8z"/>
        </svg>
        <span>Instagram</span>
      </a>
    </div>
  </div>
</section>

  <!-- FOOTER -->
  <footer>
    <p>© <span id="year"></span> Mountain Muscle · Oakhurst, CA</p>
    <a href="#top" class="back-to-top" aria-label="Back to top">↑ Back to top</a>
  </footer>

  <!-- Floating Back to Top Button -->
  <button id="backToTopBtn" class="back-to-top-fab" aria-label="Back to top" type="button">
    ↑
  </button>

  <!-- Local Business Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Gym",
    "name": "Mountain Muscle",
    "url": "https://mountainmuscle.fitness/",
    "telephone": "+15596417255",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "40118 Enterprise Dr.",
      "addressLocality": "Oakhurst",
      "addressRegion": "CA",
      "postalCode": "93644",
      "addressCountry": "US"
    },
    "sameAs": [
      "https://www.facebook.com/MountainMuscleOakhurst",
      "https://www.instagram.com/mountainmuscleoakhurst"
    ]
  }
  </script>

  <!-- SCRIPTS -->
  <script>
    // Footer year
    const yearEl = document.getElementById("year");
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Dropdown menu logic
    (function () {
      const menuWrap = document.querySelector(".menu-wrap");
      const menuBtn = document.getElementById("menuButton");
      const menuDropdown = document.getElementById("menuDropdown");

      function closeMenu() {
        if (!menuWrap) return;
        menuWrap.classList.remove("open");
        if (menuBtn) menuBtn.setAttribute("aria-expanded", "false");
      }

      if (menuWrap && menuBtn && menuDropdown) {
        menuBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          const isOpen = menuWrap.classList.toggle("open");
          menuBtn.setAttribute("aria-expanded", String(isOpen));
        });

        menuDropdown.querySelectorAll("a").forEach((a) => a.addEventListener("click", closeMenu));
        document.addEventListener("click", closeMenu);
        document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeMenu(); });
      }
    })();

    // Modals (instructors + reviews) — one handler for all [data-modal]
    (function () {
      const triggers = document.querySelectorAll("[data-modal]");
      const modals = document.querySelectorAll(".modal");
      let lastFocusEl = null;

      function openModal(modal) {
        if (!modal) return;
        lastFocusEl = document.activeElement;

        modal.classList.add("is-open");
        modal.setAttribute("aria-hidden", "false");
        document.body.classList.add("no-scroll");

        const closeBtn = modal.querySelector("[data-close]");
        if (closeBtn) closeBtn.focus();

        if (modal.id) history.replaceState(null, "", `#${modal.id}`);
      }

      function closeModal(modal) {
        if (!modal) return;

        modal.classList.remove("is-open");
        modal.setAttribute("aria-hidden", "true");
        document.body.classList.remove("no-scroll");

        if (modal.id && location.hash === `#${modal.id}`) {
          history.replaceState(null, "", location.pathname);
        }

        if (lastFocusEl && typeof lastFocusEl.focus === "function") {
          lastFocusEl.focus();
          lastFocusEl = null;
        }
      }

      triggers.forEach((btn) => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-modal");
          openModal(document.getElementById(id));
        });
      });

      modals.forEach((modal) => {
        modal.addEventListener("click", (e) => {
          if (e.target && e.target.matches("[data-close]")) closeModal(modal);
        });
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          const open = document.querySelector(".modal.is-open");
          if (open) closeModal(open);
        }
      });

      window.addEventListener("load", () => {
        const id = location.hash.replace("#", "");
        if (!id) return;
        const modal = document.getElementById(id);
        if (modal && modal.classList.contains("modal")) openModal(modal);
      });
    })();

    // Logo splash (webm first, mp4 fallback) + HARD FAILSAFE Add snow day or other splash
    (function () {
      const splash = document.getElementById("logo-splash");
      const video = document.getElementById("logo-splash-video");
      const targetLogo = document.querySelector(".logo");

      if (!splash || !video || !targetLogo) return;

      const pickBase = () => {
        const w = window.innerWidth;
        const h = window.innerHeight;
        if (h > w) return "/assets/logo-splash-portrait";
        if (w / h >= 2.1) return "/assets/logo-splash-ultrawide";
        return "/assets/logo-splash-landscape";
      };

      const base = pickBase();

      // Build sources (webm -> mp4)
      video.innerHTML = "";
      [
        { src: `${base}.webm`, type: "video/webm" },
        { src: `${base}.mp4`, type: "video/mp4" }
      ].forEach((s) => {
        const source = document.createElement("source");
        source.src = s.src;
        source.type = s.type;
        video.appendChild(source);
      });

      video.load();

      const TRANSITION_MAX_MS = 750;

      const hideSplashNow = () => {
        splash.classList.add("is-hidden");
        splash.style.display = "none";
      };

      const computeAndFly = () => {
        if (splash.classList.contains("is-fading") || splash.classList.contains("is-hidden")) return;

        const v = video.getBoundingClientRect();
        const t = targetLogo.getBoundingClientRect();

        const dx = (t.left + t.width / 2) - (v.left + v.width / 2);
        const dy = (t.top + t.height / 2) - (v.top + v.height / 2);

        const scale = Math.min(t.width / v.width, t.height / v.height);

        splash.style.setProperty("--fly-x", `${dx}px`);
        splash.style.setProperty("--fly-y", `${dy}px`);
        splash.style.setProperty("--fly-scale", `${scale}`);

        splash.classList.add("is-fading");

        window.setTimeout(hideSplashNow, TRANSITION_MAX_MS + 140);
      };

      video.addEventListener("ended", computeAndFly);
      video.addEventListener("error", hideSplashNow);

      // HARD FAILSAFE: never let the splash trap the site
      window.setTimeout(hideSplashNow, 6500);

      // Try play; if blocked, just hide it
      Promise.resolve(video.play()).catch(hideSplashNow);
    })();

    // About slideshow: builds from /assets/slider/media.json (images + webm)
    ;(async function () {
      const track = document.getElementById("sliderTrack");
      if (!track) return;

      try {
        const res = await fetch("/assets/slider/media.json", { cache: "no-store" });
        if (!res.ok) throw new Error("media.json not found");
        const items = await res.json();
        if (!Array.isArray(items) || items.length === 0) return;

        const makeSlide = (item, hidden = false) => {
          const fig = document.createElement("figure");
          fig.className = "slider__slide";
          if (hidden) fig.setAttribute("aria-hidden", "true");

          const src = item && item.src;
          if (!src) return fig;

          const isVideo = item.type === "video" || /\.webm$/i.test(src);

          if (isVideo) {
            const v = document.createElement("video");
            v.src = src;
            v.muted = true;
            v.playsInline = true;
            v.autoplay = true;
            v.loop = true;
            v.preload = "metadata";
            v.setAttribute("playsinline", "");
            if (item.alt) v.setAttribute("aria-label", item.alt);
            fig.appendChild(v);
          } else {
            const img = document.createElement("img");
            img.src = src;
            img.alt = item.alt || "";
            img.loading = "lazy";
            fig.appendChild(img);
          }

          return fig;
        };

        track.innerHTML = "";
        items.forEach((it) => track.appendChild(makeSlide(it, false)));
        items.forEach((it) => track.appendChild(makeSlide(it, true)));
      } catch (e) {
        console.warn("Slideshow skipped:", e);
      }
    })();

 // Class schedule + modal
(function () {
  const MM_DAYS = ["Monday","Tuesday","Wednesday","Thursday","Friday"];
  const MM_TIMES = ["8:30am","8:45am","10:00am","4:30pm"];

  const MM_CLASSES = [
    { day:0, time:"8:30am", title:"Silver Sneakers Strength Circuit", instructor:"Meloni",
      tags:["Beginner-friendly","Strength","Silver Sneakers"],
      desc:"A guided strength circuit focused on balance, functional movement, and overall strength. Great for all levels.",
      bring:"Water + comfortable shoes.",
      notes:"Modifications available for knees/shoulders." },
    { day:0, time:"10:00am", title:"Silver Sneakers Strength Circuit", instructor:"Meloni",
      tags:["Beginner-friendly","Strength","Silver Sneakers"],
      desc:"Strength circuit focused on functional fitness, balance, and confidence.",
      bring:"Water + comfortable shoes.",
      notes:"" },
    { day:1, time:"8:45am", title:"REFIT Fitness", instructor:"Gerri",
      tags:["Dance","Cardio","All levels"],
      desc:"A fun cardio format set to uplifting music with easy-to-follow moves and a great sweat.",
      bring:"Water + towel.",
      notes:"Low-impact options available." },
    { day:1, time:"10:00am", title:"Silver Sneakers Cardio", instructor:"Kathy",
      tags:["Cardio","Low-impact","Silver Sneakers"],
      desc:"Low-impact cardio using simple patterns to build endurance, coordination, and confidence.",
      bring:"Water.",
      notes:"Chair options available." },
    { day:2, time:"10:00am", title:"Chair Yoga", instructor:"Kathy",
      tags:["Mobility","Gentle","Recovery"],
      desc:"A gentle yoga session using a chair for support—great for mobility, stiffness, and relaxation.",
      bring:"Water (mat optional).",
      notes:"" },
    { day:2, time:"4:30pm", title:"Klass", instructor:"Karina",
      tags:["Strength","Conditioning","Coached"],
      desc:"A coached group workout with a mix of strength and conditioning.",
      bring:"Water + athletic shoes.",
      notes:"Scaling options available—ask the coach." },
    { day:3, time:"8:45am", title:"General Flow Yoga", instructor:"Lisa",
      tags:["Yoga","Flow","All levels"],
      desc:"A steady flow with breath and movement to improve flexibility, strength, and calm focus.",
      bring:"Yoga mat + water.",
      notes:"Blocks/straps optional." },
    { day:3, time:"10:00am", title:"Silver Sneakers Strength Circuit", instructor:"Meloni",
      tags:["Beginner-friendly","Strength","Silver Sneakers"],
      desc:"Strength circuit focused on functional fitness, balance, and confidence.",
      bring:"Water + comfortable shoes.",
      notes:"" },
    { day:4, time:"8:45am", title:"REFIT Fitness", instructor:"Gerri",
      tags:["Dance","Cardio","All levels"],
      desc:"High-energy cardio with music and simple choreography.",
      bring:"Water + towel.",
      notes:"" },
    { day:4, time:"10:00am", title:"Silver Sneakers Cardio", instructor:"Kathy",
      tags:["Cardio","Low-impact","Silver Sneakers"],
      desc:"Low-impact cardio designed for endurance and mobility in a supportive group.",
      bring:"Water.",
      notes:"" }
  ];

  const grid = document.getElementById("scheduleGrid");
  if (!grid) return;

  const overlay = document.getElementById("classModalOverlay");
  const closeBtn = document.getElementById("classModalClose");
  if (!overlay || !closeBtn) return;

  const titleEl = document.getElementById("classModalTitle");
  const metaEl  = document.getElementById("classModalMeta");
  const tagsEl  = document.getElementById("classModalTags");
  const descEl  = document.getElementById("classModalDesc");
  const bringEl = document.getElementById("classModalBring");
  const notesEl = document.getElementById("classModalNotes");

  const slotMap = new Map(MM_CLASSES.map(c => [`${c.time}|${c.day}`, c]));

  function openModal(c){
    if (!titleEl || !metaEl || !tagsEl || !descEl || !bringEl || !notesEl) return;

    titleEl.textContent = c.title;
    metaEl.textContent = `${MM_DAYS[c.day]} • ${c.time} • w/ ${c.instructor}`;

    tagsEl.innerHTML = "";
    (c.tags || []).forEach(t => {
      const span = document.createElement("span");
      span.className = "class-tag";
      span.textContent = t;
      tagsEl.appendChild(span);
    });

    descEl.textContent  = c.desc || "";
    bringEl.textContent = c.bring ? `What to bring: ${c.bring}` : "";
    notesEl.textContent = c.notes ? `Notes: ${c.notes}` : "";

    overlay.classList.add("open");
    closeBtn.focus();
  }

  function closeModal(){
    overlay.classList.remove("open");
  }

  closeBtn.addEventListener("click", closeModal);
  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeModal();
  });
  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeModal();
  });

  // Render grid
  grid.innerHTML = "";
  MM_TIMES.forEach(time => {
    const timeEl = document.createElement("div");
    timeEl.className = "schedule-time";
    timeEl.textContent = time;
    grid.appendChild(timeEl);

    for (let day = 0; day < 5; day++){
      const cell = document.createElement("div");
      cell.className = "schedule-cell";

      const c = slotMap.get(`${time}|${day}`);
      if (c){
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "class-pill";
        btn.innerHTML = `${c.title}<small>w/ ${c.instructor}</small>`;
        btn.addEventListener("click", () => openModal(c));
        cell.appendChild(btn);
      } else {
        const empty = document.createElement("div");
        empty.className = "schedule-empty";
        cell.appendChild(empty);
      }

      grid.appendChild(cell);
    }
  });
})();
  
    // Floating Back to Top
    (function () {
      const btn = document.getElementById("backToTopBtn");
      if (!btn) return;

      const toggle = () => btn.classList.toggle("is-visible", window.scrollY > 400);
      window.addEventListener("scroll", toggle, { passive: true });
      toggle();

      btn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    })();
  </script>
</body>
</html>
